---
title: "pydatavolley"
format: gfm
---

A python package for reading volleyball scouting files in DataVolley format (\*.dvw).

<https://pypi.org/project/pydatavolley/>

### Installation

```         
pip install pydatavolley
pip install --upgrade pydatavolley
```

## [Examples]{.underline}

#### Reading one file:

```{python}
# Using read_dv.DataVolley(None) will use example file
import pandas as pd
from datavolley import read_dv
pd.set_option('display.max_columns', 60)
pd.set_option('display.width', 280)
dv_instance = read_dv.DataVolley(None)
df = dv_instance.get_plays()
print(df[588:618])
```

------------------------------------------------------------------------

#### Reading multiple files - grouping for attacks and kills:

```{python}
import pandas as pd
from datavolley import read_dv
import glob

directory_path = "C:\\Users\\TylerWiddison\\Downloads\\"
file_extension = "*.dvw"
pattern = f"{directory_path}{file_extension}"

# Get a list of all files with the specified extension in the directory
file_list = glob.glob(pattern)

# Initialize an empty DataFrame to store combined data
combined_df = pd.DataFrame()

# Loop through each file path
for path in file_list:
    dv_instance = read_dv.DataVolley(path)
    df = dv_instance.get_plays()

    # Concatenate the current DataFrame with the combined DataFrame
    combined_df = pd.concat([combined_df, df], ignore_index=True)

# Filter for attacks and print attacks 
print(
    combined_df[combined_df['skill'] == 'Attack']
    .groupby(['player_name', 'team'])
    .agg(Att=('skill', 'count'),
         K=('evaluation_code', lambda x: x.eq('#').sum(skipna=True)),
         K_pct=('evaluation_code', lambda x: round((x.eq('#').sum(skipna=True) / x.count()), 3)))
    .reset_index()
    .sort_values(by='Att', ascending=False)
    .head(20)
    .reset_index(drop=True)
    .to_string()
)
```